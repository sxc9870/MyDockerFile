version: '3'
services:
  sentinel1:
      image: redis:master
      volumes:
        - $PWD/data/redis/sentinel1:/data/redis
      ports:
        - "26378:26379"
      tty: true
      command:
        - sed -i '1i\sentinel monitor myMaster master:6379 2' /sentinel.conf &&\
          sed -i '1i\sentinel auth-pass myMaster $PASSWORD' /sentinel.conf &&\
          sed -i '1i\sentinel down-after-milliseconds myMaster 5000' /sentinel.conf&&\
          sed -i '1i\sentinel parallel-syncs myMaster 1' /sentinel.conf &&\
          sed -i '1i\sentinel failover-timeout myMaster 60000' /sentinel.conf &&\
          redis-sentinel   /sentinel.conf   --masterauth $PASSWORD --requirepass $PASSWORD
      depends_on:
        - master
      links:
        - master




